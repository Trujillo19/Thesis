\chapter{Modelo matemático}

De acuerdo con \cite[p.~14]{Dombre2007}, el diseño y control de robots requiere diversos modelos matemáticos, tales como:

\begin{itemize}
\item Cinemática directa e inversa, es decir, encontrar la posición del efector final en términos de las coordenadas de las articulaciones y viceversa.
\item Cinemática de la velocidad, encontrar la velocidad del efector final en términos de la velocidad de las articulaciones y viceversa.
\item Modelo dinámico, el cual establece la relación entre los torques o fuerzas que ejercen los actuadores y las posiciones, velocidades y aceleraciones de las articulaciones.
\end{itemize}

\begin{figure}
    \centering
    \includegraphics[scale=0.7]{./img/chapter4/robotarmprototype.png}
    \caption{Boceto del brazo robótico propuesto}
    \label{fig:roboticarmprototype}
\end{figure}

En este capítulo se desarrollarán estos modelos matemáticos, los cuales son necesarios para simular y predecir el comportamiento del mismo. 

Para realizar estos modelos, es necesario contar con los parámetros físicos y geométricos del robot, los cuales, para una primera aproximación se mencionarán a continuación.

Como podemos apreciar en el diagrama de requerimientos de la figura \ref{fig:requirementdiagram}, es necesario que el robot tenga seis grados de libertad del tipo revoluta, así, el diagrama de cuerpo libre de la cadena cinemática se expresa en la figura \ref{fig:kinematicchain}.

Otros requerimientos necesarios para el desarrollo del modelo matemático es el alcance total del brazo, el cual deberá ser de mínimo 450 mm, la velocidad, la cuál deberá estar en un rango entre 30 \degree/s y 180 \degree/s, por último, la carga útil deberá ser de 2 kg.

\begin{figure}
    \centering
    \includegraphics[scale=0.45]{./img/chapter4/kinematicchainv5.png}
    \caption{Cadena cinemática ¿free body diagram?}
    \label{fig:kinematicchain}
\end{figure}

En la figura \ref{fig:roboticarmprototype} podemos ver un boceto del brazo robótico que se planea implementar.

Las distancias, masas e inercia de las articulaciones las podemos observar en la tabla x.

Con estos datos claros, es posible empezar la realización de los modelos matemáticos.

\section{Cinemática directa e inversa}
\subsection{Cinemática directa}

La cinemática directa de un robot se refiere al cálculo de la posición y orientación del marco de referencia del efector final desde sus coordenadas $\theta$. \cite{University2017}

\subsubsection{Matriz de transformación homogénea}

Según \cite{University2017}, existen tres usos principales para una matriz de transformación homogénea:

\begin{enumerate}
  \item Para representar la configuración (posición y orientación) de un cuerpo rígido.
  \item Para cambiar el marco de referencia en el cuál está representado un vector o un \textit{frame}.
  \item Para desplazar un vector o un \textit{frame}.
\end{enumerate}

Para el caso que nos ocupa, la matriz de transformación homogénea desde la base fija del robot hasta su efector final, está descrita por:

\begin{equation}
\label{eq:forwardkinematicequation}
{}_{0}^{6}T = {}_{0}^{1}T \ {}_{1}^{2}T \ {}_{2}^{3}T \ {}_{3}^{4}T \ {}_{4}^{5}T \ {}_{5}^{6}T 
\end{equation}

\begin{multicols}{2}
\[
{}_{0}^{1}T = 
\begin{bmatrix}
    1 & 0 & 0 & {a}_x  \\
    0 & \cos{\theta_1} & -\sin{\theta_1} & {a}_y \\
    0 & \sin{\theta_1} & \cos{\theta_1} & {a}_z \\
    0 & 0 & 0 & 1
\end{bmatrix}
\]

% Como no hay rotación en el frame, se usa la matriz identidad.

\[
{}_{1}^{2}T = 
\begin{bmatrix}
    1 & 0 & 0 & b_x  \\
    0 & 1 & 0 & b_y \\
    0 & 0 & 1 & b_z \\
    0 & 0 & 0 & 1
\end{bmatrix}
\]

% Como no hay rotación en el frame, se usa la matriz identidad.

\[
{}_{2}^{3}T = 
\begin{bmatrix}
    1 & 0 & 0 & c_x  \\
    0 & 1 & 0 & c_y \\
    0 & 0 & 1 & c_z \\
    0 & 0 & 0 & 1
\end{bmatrix}
\]

\[
{}_{3}^{4}T = 
\begin{bmatrix}
    \cos{\theta_4} & 0 & \sin{\theta_4} & d_x  \\
    0 & 1 & 0 & d_y \\
    -\sin{\theta_4} & 0 & \cos{\theta_4} & d_z \\
    0 & 0 & 0 & 1
\end{bmatrix}
\]

\[
{}_{4}^{5}T = 
\begin{bmatrix}
    1 & 0 & 0 & e_x  \\
    0 & \cos{\theta_5} & -\sin{\theta_5} & e_y \\
    0 & \sin{\theta_5} & \cos{\theta_5} & e_z \\
    0 & 0 & 0 & 1
\end{bmatrix}
\]

\[
{}_{5}^{6}T = 
\begin{bmatrix}
    1 & 0 & 0 & e_x  \\
    0 & \cos{\theta_5} & -\sin{\theta_5} & e_y \\
    0 & \sin{\theta_5} & \cos{\theta_5} & e_z \\
    0 & 0 & 0 & 1
\end{bmatrix}
\]

\end{multicols}

Para comprobar que la matriz se realizó correctamente se programó un algoritmo en MATLAB que tiene como datos de entrada un vector con los seis ángulos del robot y calcula la posición del efector final usando el método descrito en esta sección, se puede consultar en el anexo \ref{Anexo1}

\subsubsection{Convención de Denavit-Hartenberg}


\begin{table}[h]
\centering
\caption{Parámetros Denavit Hartenberg}
 \label{table:denavithartenberg}
\begin{tabular}{l|l|l|l|l|}
               & $\theta$ [rad] & a [m]    & d [m]   & $\alpha$ [rad]                        \\ 
\hline
Articulación 1 & 0                           & 0        & 0.1519  & $\frac{\pi}{2}$   \\
Articulación 2 & 0                           & -0.24365 & 0       & 0                                                  \\
Articulación 3 & 0                           & -0.21325 & 0       & 0                                                  \\
Articulación 4 & 0                           & 0        & 0.11235 & $\frac{\pi}{2}$   \\
Articulación 5 & 0                           & 0        & 0.08535 & $-\frac{\pi}{2}$  \\
Articulación 6 & 0                           & 0        & 0.0819  & 0                                                 
\end{tabular}
\end{table}

\subsection{Cinemática inversa}
No estoy seguro para que me servirá, si lo hará el software. MoveIt o MATLAB.

\section{Cinemática de la velocidad}


\section{Modelo dinámico}
\subsection{Formulación Lagraniana}
\subsection{Formulación Newton-Euler}